!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="assets/scripts/",n(n.s=0)}([function(e,t,n){"use strict";function s(e,t){const n=e.split("/"),s=n.length;return 1===s?t.result[n[0]]:2===s?t.result[n[0]][n[1]]:3===s?t.result[n[0]][n[1]][n[2]]:4===s?t.result[n[0]][n[1]][n[2]][n[3]]:void 0}function a(e){let t;return t="ggr"===e||"vat"===e||"ngr"===e?e.toUpperCase():e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),t}n.r(t);class o{static tableSort(){const e=event.target.closest("span"),t=e.dataset.sortMethod,n=Array.from(e.parentNode.children).indexOf(e),s=["gameName","currency","time","playerId","portalName","activity"].includes(t)?"text":"number";let a;if(e.classList.contains("asc"))e.classList.remove("asc"),e.classList.add("desc"),a="desc";else if(e.classList.contains("desc"))e.classList.remove("desc"),e.classList.add("asc"),a="asc";else for(const t of e.parentNode.children)t===e?(t.classList.add("asc"),a="asc"):t.removeAttribute("class");const c=this.nextElementSibling,i=c.children,r=Array.from(i).sort(o.compare(n,s,a));c.innerHTML="";for(const e of r)c.appendChild(e)}static compare(e,t,n){return function(s,a){const o="number"===t?parseFloat(s.children[e].textContent.replace(/,/g,"")):s.children[e].textContent.toUpperCase(),c="number"===t?parseFloat(a.children[e].textContent.replace(/,/g,"")):a.children[e].textContent.toUpperCase();let i=0;return o>c?i=1:o<c&&(i=-1),"desc"===n?-1*i:i}}static eventRemove(e){if(!confirm("Do you want to delete this event ?"))return;const t=event.target.closest(".table-row"),n=+t.id;for(let s=0;s<e.length;s++)if(e[s].id===n){e.splice(s,1),t.remove();break}}}class c{static tableHead(e,t,n){const s=document.createElement("div");s.classList.add("table-head");const c=document.createElement("div");if(c.classList.add("table-row"),t){const t=document.createElement("span");t.textContent=n,t.setAttribute("data-sort-method",n.toLowerCase()),c.appendChild(t);for(const t in e){const e=document.createElement("span");e.textContent=t,c.appendChild(e)}}else for(const t in e[0]){const e=document.createElement("span");e.textContent=a(t),e.setAttribute("data-sort-method",t),c.appendChild(e)}return s.appendChild(c),s.addEventListener("click",o.tableSort),s}static tableBody(e,t){const n=document.createElement("div");if(n.classList.add("table-body"),t){let t=Object.keys(e[Object.keys(e)[0]]);t=t.map(e=>a(e));const s=t.length;for(let a=0;a<s;a++){const s=document.createElement("div");s.classList.add("table-row");const o=document.createElement("span");o.textContent=t[a],s.appendChild(o);for(const t in e){const n=document.createElement("span");if(n.textContent=Object.values(e[t])[a],"Change"===t){const e=0==n.textContent?"same":n.textContent>0?"up":"down";n.classList.add("change",e),n.textContent+="%"}s.appendChild(n)}n.appendChild(s)}}else{for(const t of e){const e=document.createElement("div");e.classList.add("table-row");for(const n in t){const s=document.createElement("span");s.textContent=t[n],e.appendChild(s)}const s=Math.random();Object.defineProperty(t,"id",{value:s}),e.id=s,n.appendChild(e)}n.classList.add("removable"),n.addEventListener("click",o.eventRemove.bind(n,e))}return n}static tableFoot(e){const t=document.createElement("div");t.classList.add("table-foot");const n=document.createElement("div");n.classList.add("table-row");for(const t in e[0]){const s=document.createElement("span");s.textContent=e[0][t],n.appendChild(s)}return t.appendChild(n),t}}class i{constructor(e,t,n,a,o,c,i){this.id=n,function(e){return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",e),s.responseType="json",s.onload=function(){t(s.response)},s.onerror=function(){n(s.response)},s.send()})}(t).then(t=>{this.tableData=s(e,t),c&&(this.tableDataSum=[s(c,t)]),this.createTable(this.tableData,a,o,this.tableDataSum),this.conectFilter(),i&&this.connectSlider(i,this.tableData)}).catch(e=>{document.getElementById(this.id).textContent="Error displaying table."})}createTable(e,t,n,s){const a=c.tableHead(e,t,n),o=c.tableBody(e,t),i=document.createElement("div");i.classList.add("table-wrapper");const r=document.createElement("div");if(r.classList.add("table"),r.appendChild(a),r.appendChild(o),s){const e=c.tableFoot(s);r.appendChild(e)}i.appendChild(r),document.getElementById(this.id).appendChild(i)}conectFilter(){const e=document.getElementById(this.id);if(e.classList.contains("filterable")){const t=document.querySelector(`.filter-item .label[data-href=${this.id}]`);t.classList.add("active"),t.addEventListener("click",this.attachFilter),e.classList.contains("active")&&t.classList.add("checked")}else if(e.classList.contains("switchable")){document.querySelector(`.filter-item [data-href=${this.id}]`).classList.add("checked")}}attachFilter(){const e=this.dataset.href;this.classList.toggle("checked"),document.getElementById(e).classList.toggle("active"),this.closest(".filter-item").querySelector(".ms-select-all").classList.remove("checked")}connectSlider(e,t){const n=document.getElementById("slider-template").content.cloneNode(!0),s=document.getElementById(this.id).closest(".page").querySelector(".panel-filters");let a=0,o=0;for(const n of t)n[e]<a?a=n[e]:n[e]>o&&(o=n[e]);const c=n.querySelector("input[type=range]"),i=n.querySelector("input[type=number]");c.setAttribute("min",a),c.setAttribute("max",o),i.setAttribute("min",a),i.setAttribute("max",o),c.addEventListener("input",(function(){i.value=this.value})),i.value=0,i.addEventListener("input",(function(){c.value=this.value})),s.appendChild(n)}}(class{static init(){new i("activities","assets/json/dashboard.json","dashboard-table",!0,"Activity"),new i("gameStatisticsPerGame","assets/json/statistic-games-summary.json","games-summary-table",!1,!1,"gameStatisticsSum"),new i("jackpots/Silver/dashboardJackpots","assets/json/dashboard.json","jackpots-silver-table",!1,!1),new i("jackpots/Gold/dashboardJackpots","assets/json/dashboard.json","jackpots-gold-table",!1,!1),new i("jackpots/Platinum/dashboardJackpots","assets/json/dashboard.json","jackpots-platinum-table",!1,!1),new i("jackpots/Diamond/dashboardJackpots","assets/json/dashboard.json","jackpots-diamond-table",!1,!1),new i("portalsActivities/Portal-EUR/activities","assets/json/dashboard.json","dashboard-portal-eur-table",!0,"Activity"),new i("portalsActivities/Portal-USD/activities","assets/json/dashboard.json","dashboard-portal-usd-table",!0,"Activity"),new i("portalsActivities/Portal-RSD/activities","assets/json/dashboard.json","dashboard-portal-rsd-table",!0,"Activity"),new i("slotAccounting","assets/json/accounting-reports.json","slot-accounting-table",!1,!1,"slotAccountingSum","bonusRate"),new i("rouletteAccounting","assets/json/accounting-reports.json","roulette-accounting-table",!1,!1,"rouletteAccountingSum"),new i("liveEuropeanRouletteAccounting","assets/json/accounting-reports.json","ler-accounting-table",!1,!1,"liveEuropeanRouletteAccountingSum"),new i("tripleCrownRouletteAccounting","assets/json/accounting-reports.json","tcr-accounting-table",!1,!1,"tripleCrownRouletteAccountingSum"),new i("pokerAccounting","assets/json/accounting-reports.json","poker-accounting-table",!1,!1,"pokerAccountingSum")}}).init(),class{static init(){document.querySelector(".ms-select-all").addEventListener("click",this.multiselectFilterHandle);const e=document.querySelector(".sng-filter .dd-options"),t=document.querySelectorAll(".portal-table");e.addEventListener("click",this.navigationHandler.bind(null,t,"div","div"));const n=document.querySelectorAll(".filter-item .dropdown-button");for(const e of n)e.addEventListener("click",this.dropdownHandler);document.getElementById("search-button").addEventListener("click",(function(){this.parentNode.classList.toggle("search-active"),this.nextElementSibling.focus()}));const s=document.getElementById("search-input");s.addEventListener("input",this.searchHandler.bind(s,"#accounting-reports .table-body span:first-child")),document.querySelector(".mobile-toggle").addEventListener("click",()=>{document.querySelector("body").classList.toggle("sidenav-active")}),document.getElementById("sidebar").addEventListener("click",()=>{const e=document.querySelector(".mobile-toggle"),t=document.getElementById("sidebar-menu");event.target.closest(".mobile-toggle")!==e&&event.target.closest("#sidebar-menu")!==t&&document.querySelector("body").classList.remove("sidenav-active")},!0),document.addEventListener("click",this.closeFiltersHandler,!0);const a=document.getElementById("sidebar-menu"),o=document.querySelectorAll("#main-content .page");a.addEventListener("click",this.navigationHandler.bind(null,o,"li","a"));const c=document.querySelectorAll(".panel-nav");for(const e of c){const t=e.parentNode.querySelector(".panel-content-wrapper").children;e.addEventListener("click",this.navigationHandler.bind(null,t,"li","a"))}}static searchHandler(e){const t=this.value.trim(),n=document.querySelectorAll(e),s=new RegExp(t,"gi");for(const e of n){let n=e.textContent;if(""===t)e.innerHTML=n,e.parentNode.classList.remove("hide");else{const t=n.replace(s,"<strong class='highlight'>$&</strong>");e.innerHTML=t,t!==n?e.parentNode.classList.remove("hide"):e.parentNode.classList.add("hide")}}}static dropdownHandler(){this.parentNode.classList.toggle("show")}static multiselectFilterHandle(){const e=this.closest(".filter-item").querySelectorAll(".dd-options .active:not(.checked)");for(const t of e)t.click();this.classList.add("checked")}static closeFiltersHandler(){const e=document.querySelector(".filter-item.show");e&&event.target.closest(".filter-item")!==e&&e.classList.remove("show")}static navigationHandler(e,t,n){event.preventDefault();const s=event.target.closest(t),a=!!event.target.closest(n)&&event.target.closest(n).dataset.href;if(a){for(const e of s.parentNode.children)e===s?e.classList.add("active"):e.classList.remove("active");for(const t of e)t.id===a?t.classList.add("active"):t.classList.remove("active")}}}.init()}]);
//# sourceMappingURL=app.js.map