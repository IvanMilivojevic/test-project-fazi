{"version":3,"file":"app.js","sources":["webpack:///app.js"],"sourcesContent":["!function(t){var e={};function n(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"assets/scripts/\",n(n.s=0)}([function(t,e,n){\"use strict\";function s(t,e){const n=t.split(\"/\"),s=n.length;return 1===s?e.result[n[0]]:2===s?e.result[n[0]][n[1]]:3===s?e.result[n[0]][n[1]][n[2]]:4===s?e.result[n[0]][n[1]][n[2]][n[3]]:void 0}function a(t){let e;return e=\"ggr\"===t||\"vat\"===t||\"ngr\"===t?t.toUpperCase():t.replace(/([A-Z])/g,\" $1\").replace(/^./,t=>t.toUpperCase()),e}n.r(e);class o{static tableSort(){const t=event.target.closest(\"span\"),e=t.dataset.sortMethod,n=Array.from(t.parentNode.children).indexOf(t),s=[\"gameName\",\"currency\",\"time\",\"playerId\",\"portalName\",\"activity\"].includes(e)?\"text\":\"number\";let a;if(t.classList.contains(\"asc\"))t.classList.remove(\"asc\"),t.classList.add(\"desc\"),a=\"desc\";else if(t.classList.contains(\"desc\"))t.classList.remove(\"desc\"),t.classList.add(\"asc\"),a=\"asc\";else for(const e of t.parentNode.children)e===t?(e.classList.add(\"asc\"),a=\"asc\"):e.removeAttribute(\"class\");const c=this.nextElementSibling,i=c.children,r=Array.from(i).sort(o.compare(n,s,a));c.innerHTML=\"\";for(const t of r)c.appendChild(t)}static compare(t,e,n){return function(s,a){const o=\"number\"===e?parseFloat(s.children[t].textContent.replace(/,/g,\"\")):s.children[t].textContent.toUpperCase(),c=\"number\"===e?parseFloat(a.children[t].textContent.replace(/,/g,\"\")):a.children[t].textContent.toUpperCase();let i=0;return o>c?i=1:o<c&&(i=-1),\"desc\"===n?-1*i:i}}static eventRemove(t){if(!confirm(\"Do you want to delete this event ?\"))return;const e=event.target.closest(\".table-row\"),n=+e.id;for(let s=0;s<t.length;s++)if(t[s].id===n){t.splice(s,1),e.remove();break}}}class c{static tableHead(t,e,n){const s=document.createElement(\"div\");s.classList.add(\"table-head\");const c=document.createElement(\"div\");if(c.classList.add(\"table-row\"),e){const e=document.createElement(\"span\");e.textContent=n,e.setAttribute(\"data-sort-method\",n.toLowerCase()),c.appendChild(e);for(const e in t){const t=document.createElement(\"span\");t.textContent=e,c.appendChild(t)}}else for(const e in t[0]){const t=document.createElement(\"span\");t.textContent=a(e),t.setAttribute(\"data-sort-method\",e),c.appendChild(t)}return s.appendChild(c),s.addEventListener(\"click\",o.tableSort),s}static tableBody(t,e){const n=document.createElement(\"div\");if(n.classList.add(\"table-body\"),e){let e=Object.keys(t[Object.keys(t)[0]]);e=e.map(t=>a(t));const s=e.length;for(let a=0;a<s;a++){const s=document.createElement(\"div\");s.classList.add(\"table-row\");const o=document.createElement(\"span\");o.textContent=e[a],s.appendChild(o);for(const e in t){const n=document.createElement(\"span\");if(n.textContent=Object.values(t[e])[a],\"Change\"===e){const t=0==n.textContent?\"same\":n.textContent>0?\"up\":\"down\";n.classList.add(\"change\",t),n.textContent+=\"%\"}s.appendChild(n)}n.appendChild(s)}}else{for(const e of t){const t=document.createElement(\"div\");t.classList.add(\"table-row\");for(const n in e){const s=document.createElement(\"span\");s.textContent=e[n],t.appendChild(s)}const s=Math.random();Object.defineProperty(e,\"id\",{value:s}),t.id=s,n.appendChild(t)}n.classList.add(\"removable\"),n.addEventListener(\"click\",o.eventRemove.bind(n,t))}return n}static tableFoot(t){const e=document.createElement(\"div\");e.classList.add(\"table-foot\");const n=document.createElement(\"div\");n.classList.add(\"table-row\");for(const e in t[0]){const s=document.createElement(\"span\");s.textContent=t[0][e],n.appendChild(s)}return e.appendChild(n),e}}class i{constructor(t,e,n,a,o,c,i){this.id=n,function(t){return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open(\"GET\",t),s.responseType=\"json\",s.onload=function(){e(s.response)},s.onerror=function(){n(s.response)},s.send()})}(e).then(e=>{this.tableData=s(t,e),c&&(this.tableDataSum=[s(c,e)]),this.createTable(this.tableData,a,o,this.tableDataSum),this.conectFilter(),i&&this.connectSlider(i,this.tableData)}).catch(t=>{console.log(t),document.getElementById(this.id).textContent=\"Error displaying table.\"})}createTable(t,e,n,s){const a=c.tableHead(t,e,n),o=c.tableBody(t,e),i=document.createElement(\"div\");if(i.classList.add(\"table\"),i.appendChild(a),i.appendChild(o),s){const t=c.tableFoot(s);i.appendChild(t)}document.getElementById(this.id).appendChild(i)}conectFilter(){const t=document.getElementById(this.id);if(t.classList.contains(\"filterable\")){const e=document.querySelector(`.filter-item .label[data-href=${this.id}]`);e.classList.add(\"active\"),e.addEventListener(\"click\",this.attachFilter),t.classList.contains(\"active\")&&e.classList.add(\"checked\")}else if(t.classList.contains(\"switchable\")){document.querySelector(`.filter-item [data-href=${this.id}]`).classList.add(\"checked\")}}attachFilter(){const t=this.dataset.href;this.classList.toggle(\"checked\"),document.getElementById(t).classList.toggle(\"active\"),this.closest(\".filter-item\").querySelector(\".ms-select-all\").classList.remove(\"checked\")}connectSlider(t,e){const n=document.getElementById(\"slider-template\").content.cloneNode(!0),s=document.getElementById(this.id).closest(\".page\").querySelector(\".panel-filters\");let a=0,o=0;for(const n of e)n[t]<a?a=n[t]:n[t]>o&&(o=n[t]);const c=n.querySelector(\"input[type=range]\"),i=n.querySelector(\"input[type=number]\");c.setAttribute(\"min\",a),c.setAttribute(\"max\",o),c.addEventListener(\"input\",(function(){i.value=this.value})),i.value=0,i.addEventListener(\"input\",(function(){c.value=this.value})),s.appendChild(n)}}(class{static init(){new i(\"activities\",\"assets/json/dashboard.json\",\"dashboard-table\",!0,\"Activity\"),new i(\"gameStatisticsPerGame\",\"assets/json/statistic-games-summary.json\",\"games-summary-table\",!1,!1,\"gameStatisticsSum\"),new i(\"jackpots/Silver/dashboardJackpots\",\"assets/json/dashboard.json\",\"jackpots-silver-table\",!1,!1),new i(\"jackpots/Gold/dashboardJackpots\",\"assets/json/dashboard.json\",\"jackpots-gold-table\",!1,!1),new i(\"jackpots/Platinum/dashboardJackpots\",\"assets/json/dashboard.json\",\"jackpots-platinum-table\",!1,!1),new i(\"jackpots/Diamond/dashboardJackpots\",\"assets/json/dashboard.json\",\"jackpots-diamond-table\",!1,!1),new i(\"portalsActivities/Portal-EUR/activities\",\"assets/json/dashboard.json\",\"dashboard-portal-eur-table\",!0,\"Activity\"),new i(\"portalsActivities/Portal-USD/activities\",\"assets/json/dashboard.json\",\"dashboard-portal-usd-table\",!0,\"Activity\"),new i(\"portalsActivities/Portal-RSD/activities\",\"assets/json/dashboard.json\",\"dashboard-portal-rsd-table\",!0,\"Activity\"),new i(\"slotAccounting\",\"assets/json/accounting-reports.json\",\"slot-accounting-table\",!1,!1,\"slotAccountingSum\",\"bonusRate\"),new i(\"rouletteAccounting\",\"assets/json/accounting-reports.json\",\"roulette-accounting-table\",!1,!1,\"rouletteAccountingSum\"),new i(\"liveEuropeanRouletteAccounting\",\"assets/json/accounting-reports.json\",\"ler-accounting-table\",!1,!1,\"liveEuropeanRouletteAccountingSum\"),new i(\"tripleCrownRouletteAccounting\",\"assets/json/accounting-reports.json\",\"tcr-accounting-table\",!1,!1,\"tripleCrownRouletteAccountingSum\"),new i(\"pokerAccounting\",\"assets/json/accounting-reports.json\",\"poker-accounting-table\",!1,!1,\"pokerAccountingSum\")}}).init(),class{static init(){document.querySelector(\".ms-select-all\").addEventListener(\"click\",this.multiselectFilterHandle);const t=document.querySelector(\".sng-filter .dd-options\"),e=document.querySelectorAll(\".portal-table\");t.addEventListener(\"click\",this.navigationHandler.bind(null,e,\"div\",\"div\"));const n=document.querySelectorAll(\".filter-item .dropdown-button\");for(const t of n)t.addEventListener(\"click\",this.dropdownHandler);document.getElementById(\"search-button\").addEventListener(\"click\",(function(){this.parentNode.classList.toggle(\"search-active\"),this.nextElementSibling.focus()}));const s=document.getElementById(\"search-input\");s.addEventListener(\"input\",this.searchHandler.bind(s,\"#accounting-reports .table-body span:first-child\")),document.addEventListener(\"click\",this.closeFiltersHandler,!0);const a=document.getElementById(\"sidebar-menu\"),o=document.querySelectorAll(\"#main-content .page\");a.addEventListener(\"click\",this.navigationHandler.bind(null,o,\"li\",\"a\"));const c=document.querySelectorAll(\".panel-nav\");for(const t of c){const e=t.parentNode.querySelector(\".panel-content-wrapper\").children;t.addEventListener(\"click\",this.navigationHandler.bind(null,e,\"li\",\"a\"))}}static searchHandler(t){const e=this.value.trim(),n=document.querySelectorAll(t),s=new RegExp(e,\"gi\");for(const t of n){let n=t.textContent;if(\"\"===e)t.innerHTML=n,t.parentNode.classList.remove(\"hide\");else{const e=n.replace(s,\"<strong class='highlight'>$&</strong>\");t.innerHTML=e,e!==n?t.parentNode.classList.remove(\"hide\"):t.parentNode.classList.add(\"hide\")}}}static dropdownHandler(){this.parentNode.classList.toggle(\"show\")}static multiselectFilterHandle(){const t=this.closest(\".filter-item\").querySelectorAll(\".dd-options .active:not(.checked)\");for(const e of t)e.click();this.classList.add(\"checked\")}static closeFiltersHandler(){const t=document.querySelector(\".filter-item.show\");t&&event.target.closest(\".filter-item\")!==t&&t.classList.remove(\"show\")}static navigationHandler(t,e,n){event.preventDefault();const s=event.target.closest(e),a=!!event.target.closest(n)&&event.target.closest(n).dataset.href;if(a){for(const t of s.parentNode.children)t===s?t.classList.add(\"active\"):t.classList.remove(\"active\");for(const e of t)e.id===a?e.classList.add(\"active\"):e.classList.remove(\"active\")}}}.init()}]);"],"mappings":"AAAA","sourceRoot":""}